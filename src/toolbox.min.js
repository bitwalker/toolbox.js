(function(p,b,d){"object"===typeof exports&&(exports=b(p,exports,!1,b));"function"===typeof define?define("toolbox",null,function(){return b(p,null,!1,b)}):p.toolbox=b(p,null,!1,b)})(this,function(p,b,d,U,D){function E(a){var c=/[\S]+/g;return!k(a)||!c.test(a)}function V(a,c){c=c||1;if(!h(a,"string"))throw new l("repeat: str must be a string.");if(!h(c,"number"))throw new l("repeat: n must be a number.");for(var e=a,f=1;f<c;f++)e+=a;return e}function u(a){function c(a,c){var b=a;q(c,function(a,c){if(h(a,
"object"))for(var e in a){var f=RegExp("#\\{"+e+"\\}","g");b=b.replace(f,a[e])}else f=RegExp("#\\{"+c+"\\}","g"),b=b.replace(f,a.toString())});return b}return function(a,f){if(h(a,"regexp")||h(a,"string")){var b,d=/#\{[\d]+\}|#\{[\w-_]+\}/g,g=[];h(a,"regexp")?(b=/.+\/([gim]+)?$/.exec(a.toString()),b.shift(),b=/^\/(.+)\/[gim]+?$/.exec(a.toString()),b.shift(),b=b[0]):b=a;f.length&&(g=d.test(b)?b.match(d).length:0,g===f.length?b=c(b,f):g<f.length?b=c(b,f):g>f.length&&(d=f[f.length-1],b=c(b,f),b=b.replace(interpolationPattern,
d.toString())));return b}throw Error("Invalid type passed as interpolation target. Must be string or RegExp.");}(a,g(arguments,1))}function v(a){return"undefined"===typeof a?"undefined":null===a?"null":a.constructor&&a.constructor.name?a.constructor.name.toLowerCase():Object.prototype.toString.call(a).toLowerCase()}function h(a){var c=g(arguments,1);if(!c.length)throw new l("isType requires at least two arguments.");for(var e=0;e<c.length;e++){var b="string"===typeof c[e]?c[e]:v(c[e]);if(a===D&&("undefined"===
b||b===D)||null===a&&("null"===b||null===b)||v(a)===b)return!0}return!1}function k(a){return!h(a,"null","undefined")}function t(a,c){if(!k(a))throw new l("has: Object does not exist.",arguments);return k(c)?Object.prototype.hasOwnProperty.call(a,c)?!0:!1:r(Object.keys(a),function(c,b){Object.prototype.hasOwnProperty.call(a,b)&&c.push(b);return c},[])}function W(a,c,e){this===a&&(e=J(["configure","config"],e));e=X(F,e||[]);var b=w(K(c),"name"),n=w(L(c),"name");e=M(m(b,n),e);q(e,function(e){a[e]=c[e]});
return a}function Y(a){if(this===a)throw new l("extend: Cannot extend toolbox. Use mixin instead.",this);var c=g(arguments,1);c.length&&q(c,function(c){var b=w(b(c),"name"),n=w(n(c),"name");q(m(b,n),function(b){a[b]=c[b]})});return a}function A(a){return h(a,"function")}function K(a){var c=[],e;for(e in a)if(t(a,e)&&A(a[e])){var b={name:e,fn:B(a[e],a),arguments:a[e].length};c.push(b)}return c}function L(a){var c=[],e;for(e in a)if(t(a,e)&&!A(a[e])){var b={name:e,get:function(c){return B(function(){return this[c]},
a)}(e),set:function(c){return B(function(a){this[c]=a},a)}(e)};c.push(b)}return c}function w(a,c){return r(a,function(a,b){b[c]&&a.push(b[c]);return a},[])}function N(a,c){return O(a,c,[],[])}function O(a,c,b,f){if(a===c)return 0!==a||1/a==1/c;if(null===a||null===c)return a===c;if(!h(a,c))return!1;switch(v(a)){case "string":return a==String(c);case "number":return a!==+a?c!==+c:0===a?1/a===1/c:a===+c;case "date":case "boolean":return+a==+c;case "regexp":return a.source==c.source&&a.global==c.global&&
a.multiline==c.multiline&&a.ignoreCase==c.ignoreCase}if("object"!=typeof a||"object"!=typeof c)return!1;for(var n=b.length;n--;)if(b[n]==a)return f[n]==c;b.push(a);f.push(c);var n=0,d=!0;if(h(a,"array")){if(n=a.length,d=n==c.length)for(;n--&&(d=O(a[n],c[n],b,f)););}else{var g=a.constructor,l=c.constructor;if(g!==l&&(!A(g)||!(g instanceof g&&A(l)&&l instanceof l)))return!1;for(var k in a)if(t(a,k)&&(n++,!(d=t(c,k)&&O(a[k],c[k],b,f))))break;if(d){for(k in c)if(t(c,k)&&!n--)break;d=!n}}b.pop();f.pop();
return d}function q(a,c,b){if(!a)throw new l("forEach: Array is null or undefined.",arguments);if(!h(c,"function"))throw new l("forEach: Iterator is not callable.",arguments);var f=a.length>>>0,d=0;for(b=b||null;d<f;)t(a,d)&&c.call(b,a[d],d,a),d++}function Z(a,c){var b=[];q(a,function(a,d,g){b.push(c.call(null,a,d,g))});return b}function r(a,c,b){if(!k(b))throw new l("No initial value was provided.",arguments);var f=b;q(a,function(a,b,e){f=c.call(null,f,a,b,e)});return f}function P(a,c,b){if("function"!==
typeof c)throw new l("Predicate is not callable.",arguments);var f=[];q(a,function(a,d,g){c.call(b,a,d,g)&&f.push(a)});return f}function g(a,c,b){return Array.prototype.slice.call(a,c,b)}function m(){return Array.prototype.concat.apply([],g(arguments))}function G(a){return a[0]}function $(a){return 0<a.length?a[a.length-1]:null}function x(a){return g(a,1)}function F(a,c){return Q(a,function(a){return N(c,a)})}function R(a){var c=[];q(a,function(a){F(c,a)||c.push(a)});return c}function J(){return r(g(arguments),
function(a,c){var b=m(a,c);return R(b)},[])}function M(a,c){return r(a,function(a,b){c(b)||a.push(b);return a},[])}function Q(a,c){if(!h(c,"function"))throw new l("any: predicate is not callable.");if(!h(a,"array","object"))throw new l("any: collection provided is not an enumerable object.");return r(a,function(a,b){return a?!0:c(b)},!1)}function aa(a,c){if(!h(c,"function"))throw new l("all: predicate is not callable.");if(!h(a,"array","object"))throw new l("all: collection provided is not an enumerable object.");
return r(a,function(a,b){return a?c(b):!1},!0)}function S(a,c,b){if(0===a.length)return c;if(0===c.length)return a;k(b)||(b=function(a,c){return m(a,c)});var f=b(head(a),head(c));a=S(x(a),x(c),b);return m(f,a)}function ba(a){return r(a,function(a,b){return a+b},0)}function ca(a,c){if(c>a.length)return a;for(var b=[],f=0;f<c;f++)b.push(a[f]);return b}function da(a,c){if(c>a.length)return[];for(var b=0;b<c;b++)a.shift();return a}function ea(){}function fa(a){return a}function B(a,c){return function(){return a.apply(c,
g(arguments))}}function X(a){var c=g(arguments,1);return function(){var b=g(arguments);return a.apply(null,m(c,b))}}function C(){function a(a){p.console&&p.console.log&&p.console.log(a)}this.level=y.all;this.log=function(c){var b=g(arguments,1);c.gte(this.level)&&q(b,function(b){if("string"===typeof b)a(u("#{0}: #{1} - #{2}",new Date,c.name,b));else if(b instanceof l)a(b);else if(b instanceof Error){var e=u,d=new Date,g=c.name;var h=b.message||b.description||String(b);b?(h=u("Exception: #{0}",h),
b.lineNumber&&(h=u("#{0} on line: #{1}",h,b.lineNumber)),b.fileName&&(h=u("#{0} in file: #{1}",h,b.fileName)),b.stack&&(h=u("#{e}#{newline}Stack Trace:#{newline}#{stack}",{e:h,newline:newline,stack:b.stack})),b=h):b="N/A";a(e("#{0}: #{1} - #{2}",d,g,b))}else p.console&&p.console.dir?p.console.dir(b):null!==JSON&&JSON!==D&&a(JSON.stringify(b))})}}function s(a,b){this.level=a;this.name=b}function l(a,b){this.context=b;this.message=a;return this}function T(){this.message="Iteration of the underlying collection has been completed.";
return this}b=b||{};b.version="2.0.3";var H={extendPrototypes:!1,createGlobalAliases:!1},I={extendPrototypes:!0,createGlobalAliases:!0};switch(v(d)){case "null":case "undefined":case "boolean":d=d?I:H;break;case "object":var I={},z;for(z in H)I[z]=null!==d[z]&&d[z]!==D?d[z]:H[z];d=I;break;default:d=H}b.configure=function(a){return U.call(null,p,b,a,U)};b.config=function(){return d};b.string={};b.string.empty="";b.string.newline="\r\n";b.string.trim=function(a){return String.prototype.trim.call(a)};
b.string.isEmpty=E;d.extendPrototypes&&(String.prototype.isEmpty=function(){return E.call(null,this)});b.string.repeat=V;d.extendPrototypes&&(String.prototype.repeat=function(a){return V.call(null,this,a)});b.string.str=function(a){var b=g(arguments);h(a,"string")?b=g(b,1):a="";return b.length?r(b,function(b,c){var d="",d=h(c,"array")?r(c,function(b,c){return E(b)?c.toString():b+a+c.toString()},""):k(c.toString)?c.toString():Object.prototype.toString.call(c);return E(b)?d:k(a)?b+a+d:b+d},""):""};
b.string.format=u;b.object={};d.extendPrototypes&&(Object.prototype.getType=function(){return v.call(null,this)});b.object.getType=v;b.object.isType=h;d.extendPrototypes&&(Object.prototype.isType=function(){var a=m(this,g(arguments));return h.apply(null,a)});b.object.exists=k;b.object.has=t;d.extendPrototypes&&(Object.prototype.has=Object.prototype.hasOwnProperty||function(a){return t.call(null,this,a)});b.object.mixin=W;d.extendPrototypes&&(Object.prototype.mixin=function(a,b){return W.call(null,
this,a,b)});b.object.extend=Y;d.extendPrototypes&&(Object.prototype.extend=function(){var a=m(this,g(arguments));return Y.apply(null,a)});b.object.isFunction=A;b.object.functions=K;d.extendPrototypes&&(Object.prototype.functions=function(){return K.call(null,this)});b.object.properties=L;d.extendPrototypes&&(Object.prototype.properties=function(){return L.call(null,this)});b.object.pick=w;d.extendPrototypes&&(Object.prototype.pick=function(a){return w.call(null,this,a)});b.object.areEqual=N;d.extendPrototypes&&
(Object.prototype.areEqual=function(a){return N.call(null,this,a)});b.array={};b.array.forEach=q;d.extendPrototypes&&(Array.prototype.forEach=Array.prototype.forEach||function(a,b){return q.call(null,this,a,b)});b.array.map=Z;d.extendPrototypes&&(Array.prototype.map=Array.prototype.map||function(a){return Z.call(null,this,a)});b.array.reduce=r;d.extendPrototypes&&(Array.prototype.reduce=Array.prototype.reduce||function(a,b){return r.call(null,this,a,b)});b.array.filter=P;d.extendPrototypes&&(Array.prototype.filter=
Array.prototype.filter||function(a,b){return P.call(null,this,a,b)});b.array.slice=g;b.array.concat=m;b.array.append=function(a){return m(a,g(arguments,1))};b.array.cons=function(a,b){return m(a,b)};b.array.first=G;b.array.head=G;d.extendPrototypes&&(Array.prototype.first=function(){return G.call(null,this)},Array.prototype.head=function(){return G.call(null,this)});b.array.last=$;d.extendPrototypes&&(Array.prototype.last=function(){return $.call(null,this)});b.array.tail=x;b.array.rest=x;d.extendPrototypes&&
(Array.prototype.tail=function(){return x.call(null,this)},Array.prototype.rest=function(){return x.call(null,this)});b.array.contains=F;d.extendPrototypes&&(Array.prototype.contains=function(a){return F.call(null,this,a)});b.array.find=function(a,b){for(var e=0;e<a.length;e++)if(b(a[e]))return a[e];return null};b.array.unique=R;d.extendPrototypes&&(Array.prototype.unique=function(){return R.call(null,this)});b.array.union=J;d.extendPrototypes&&(Array.prototype.union=function(){return J.call(null,
this)});b.array.reject=M;d.extendPrototypes&&(Array.prototype.reject=function(a){return M.call(null,this,a)});b.array.any=Q;d.extendPrototypes&&(Array.prototype.any=function(a){return Q.call(null,this,a)});b.array.all=aa;d.extendPrototypes&&(Array.prototype.all=function(a){return aa.call(null,this,a)});b.array.zip=S;d.extendPrototypes&&(Array.prototype.zip=function(a,b){return S.call(null,this,a,b)});b.array.sum=ba;d.extendPrototypes&&(Array.prototype.sum=function(){return ba.call(null,this)});b.array.take=
ca;d.extendPrototypes&&(Array.prototype.take=function(a){return ca.call(null,this,a)});b.array.drop=da;d.extendPrototypes&&(Array.prototype.drop=function(a){return da.call(null,this,a)});b.array.range=function(a,b){if(!k(a)&&!k(b))return[];k(b)||(b=a,a=0);for(var e=[],d=a;d<=b;d++)e.push(d);return e};b.Generator=function(a,b){if(!k(a)||!h(a,"function"))throw new l("Generator: generator function must be a function.");k(b)||(b=null);var e=b;this.next=function(){return e=a.call(null,e)};this.take=function(a){for(var b=
[];b.length<a;)b.push(this.next());return b};this.drop=function(a){for(;0<a;)this.next()}};b.Enumerator=function(a){if(!k(a)||!h(a,"array","object"))a=[];var b=Object.keys(a);this.next=function(){if(0!==b.length)return a[b.shift()];throw new T;};this.reset=function(){b=Object.keys(a)};this.count=function(){return Object.keys(a).length}};b.random={};b.random.chars=function(a){a=a||32;for(var b=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z",
"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z",1,2,3,4,5,6,7,8,9],e=[],d=0;d<a;d++)e.push(b[Math.floor(61*Math.random())]);return e.toString().replace(/[,]/g,"")};b.random.digits=function(a){a=a||32;for(var b="";b.length<a;)b+=Math.random().toString(10).slice(2);return b.slice(0,a)};b.random.hex=function(a){a=a||32;for(var b="";b.length<a;)b+=Math.random().toString(16).slice(2);return b.slice(0,a)};b.random.uuid=function(){return randomHex(8)+
"-"+randomHex(4)+"-4"+randomHex(3)+"-"+randomHex(8)+randomHex(4)};b.func={};b.func.noop=ea;d.extendPrototypes&&(Function.prototype.noop=ea);b.func.identity=fa;d.extendPrototypes&&(Function.prototype.identity=fa);b.func.bind=B;d.extendPrototypes&&(Function.prototype.bind=Function.prototype.bind||function(a){return B.call(null,this,a)});b.func.partial=X;b.func.juxt=function(){var a=g(arguments);if(!a.length)throw Error("juxt requires at least one argument.");return function(){var b=g(arguments);return r(a,
function(a,d){a.push(d.apply(null,b));return a},[])}};b.func.complement=function(a){return function(){return!a.apply(null,g(arguments))}};b.func.thread=function(a){var b=g(arguments,1);return b.length?r(b,function(a,b){return b.apply(null,[a])},a):a};b.func.curry=function(a,b){if(a&&b)return function(){var d=g(arguments),d=b.apply(null,d);return a.apply(null,[d])};throw Error("Curry only accepts two functions.");};b.func.defmulti=function(a,b){if(!h(a,"function"))throw new l("defmulti: dispatcher must be a function");
if(!h(b,"function"))throw new l("defmulti: $default must be a function");var d=[],f=g(arguments,2);q(f,function(a){if(!h(a,"object")||!h(a.name,"string")||!h(a.fn,"function"))throw new l("defmulti: Function definition is not valid.",fn);d.push(a)});return function(){var f=g(arguments),k=a.apply(null,f);if(!h(k,"object")||!h(k.dispatch,"string"))throw new l("defmulti: expected a dispatch configuration object, but was invalid.",k);var m=P(d,function(a){return a.name===k.dispatch});0<m.length?q(m,function(a){a.fn.apply(null,
f)}):b.apply(null,f)}};b.func.memoize=function(a){return function(){var b=g(arguments),d="",f=b.length;for(currentArg=null;f--;)currentArg=b[f],d+=currentArg===Object(currentArg)?JSON.stringify(currentArg):currentArg,a.memoize=a.memoize||{};d in a.memoize||(a.memoize[d]=a.apply(this,b));return a.memoize[d]}};b.func.once=function(a){var b;return function(){k(b)||(b=a.apply(null,arguments));return b}};b.func.delay=function(a,b){var d=null,d=setTimeout(function(){a();clearTimeout(d);d=null},k(b)?b:100)};
b.func.repeat=function(a,b){for(var d=b;0<d;)a(),d--};b.logging={};var y={all:new s(0,"all"),debug:new s(1,"debug"),info:new s(2,"info"),warn:new s(3,"warn"),error:new s(4,"error"),none:new s(5,"none")};b.logging.Levels=y;C.prototype.debug=function(){var a=m(y.debug,g(arguments));this.log.apply(this,a)};C.prototype.info=function(){var a=m(y.info,g(arguments));this.log.apply(this,a)};C.prototype.warn=function(){var a=m(y.warn,g(arguments));this.log.apply(this,a)};C.prototype.error=function(){var a=
m(y.error,g(arguments));this.log.apply(this,a)};s.prototype.toString=function(){return this.name};s.prototype.eq=function(a){return this.level===a.level};s.prototype.gte=function(a){return this.level>=a.level};b.logging.Level=s;b.log=new C;l.prototype.toString=function(){return"Exception: "+this.message};b.Exception=l;T.prototype.toString=function(){return"StopIterationException: "+this.message};b.StopIterationException=T;d.createGlobalAliases&&q("string object array func random log Exception StopIterationException Generator Enumerator".split(" "),
function(a){k(p[a])?b.log.warn("Unable to add toolbox."+a+" to global namespace. Name already exists."):p[a]=b[a]});return b});

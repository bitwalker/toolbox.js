(function(p,b,d){"object"===typeof exports&&(exports=b(p,exports,!1,b));"function"===typeof define?define("toolbox",null,function(){return b(p,null,!1,b)}):p.toolbox=b(p,null,!1,b)})(this,function(p,b,d,V,C){function D(a){var c=/[\S]+/g;return!k(a)||!c.test(a)}function W(a,c){c=c||1;if(!g(a,"string"))throw new Exception("repeat: str must be a string.");if(!g(c,"number"))throw new Exception("repeat: n must be a number.");for(var h=a,e=1;e<c;e++)h+=a;return h}function X(a){var c=f(arguments);g(a,"string")?
c=f(c,1):a="";return c.length?q(c,function(c,e){var b="",b=g(e,"array")?q(e,function(c,h){return D(c)?h.toString():c+a+h.toString()},""):k(e.toString)?e.toString():Object.prototype.toString.call(e);return D(c)?b:k(a)?c+a+b:c+b},""):""}function t(a){function c(a,c){var b=a;l(c,function(a,c){if(g(a,"object"))for(var h in a){var e=RegExp("#\\{"+h+"\\}","g");b=b.replace(e,a[h])}else e=RegExp("#\\{"+c+"\\}","g"),b=b.replace(e,a.toString())});return b}return function(a,e){if(g(a,"regexp")||g(a,"string")){var b,
d=/#\{[\d]+\}|#\{[\w-_]+\}/g,f=[];g(a,"regexp")?(b=/.+\/([gim]+)?$/.exec(a.toString()),b.shift(),b=/^\/(.+)\/[gim]+?$/.exec(a.toString()),b.shift(),b=b[0]):b=a;e.length&&(f=d.test(b)?b.match(d).length:0,f===e.length?b=c(b,e):f<e.length?b=c(b,e):f>e.length&&(d=e[e.length-1],b=c(b,e),b=b.replace(interpolationPattern,d.toString())));return b}throw Error("Invalid type passed as interpolation target. Must be string or RegExp.");}(a,f(arguments,1))}function v(a){return"undefined"===typeof a?"undefined":
null===a?"null":a.constructor&&a.constructor.name?a.constructor.name.toLowerCase():Object.prototype.toString.call(a).toLowerCase()}function g(a){var c=f(arguments,1);if(!c.length)throw new Exception("isType requires at least two arguments.");for(var h=0;h<c.length;h++){var b="string"===typeof c[h]?c[h]:v(c[h]);if(a===C&&("undefined"===b||b===C)||null===a&&("null"===b||null===b)||v(a)===b)return!0}return!1}function k(a){return!g(a,"null","undefined")}function s(a,c){if(!k(a))throw new Exception("has: Object does not exist.",
arguments);return k(c)?Object.prototype.hasOwnProperty.call(a,c)?!0:!1:q(Object.keys(a),function(c,b){Object.prototype.hasOwnProperty.call(a,b)&&c.push(b);return c},[])}function Y(a,c,h){this===a&&(h=J(["configure","config"],h));h=Z(E,h||[]);var b=u(K(c),"name"),n=u(L(c),"name");h=M(m(b,n),h);l(h,function(h){a[h]=c[h]});return a}function $(a){if(this===a)throw new Exception("extend: Cannot extend toolbox. Use mixin instead.",this);var c=f(arguments,1);c.length&&l(c,function(c){var b=u(b(c),"name"),
n=u(n(c),"name");l(m(b,n),function(b){a[b]=c[b]})});return a}function z(a){return g(a,"function")}function K(a){var c=[],b;for(b in a)if(s(a,b)&&z(a[b])){var e={name:b,fn:A(a[b],a),arguments:a[b].length};c.push(e)}return c}function L(a){var c=[],b;for(b in a)if(s(a,b)&&!z(a[b])){var e={name:b,get:function(c){return A(function(){return this[c]},a)}(b),set:function(c){return A(function(a){this[c]=a},a)}(b)};c.push(e)}return c}function u(a,c){return q(a,function(a,b){b[c]&&a.push(b[c]);return a},[])}
function N(a,c){return O(a,c,[],[])}function O(a,c,b,e){if(a===c)return 0!==a||1/a==1/c;if(null===a||null===c)return a===c;if(!g(a,c))return!1;switch(v(a)){case "string":return a==String(c);case "number":return a!==+a?c!==+c:0===a?1/a===1/c:a===+c;case "date":case "boolean":return+a==+c;case "regexp":return a.source==c.source&&a.global==c.global&&a.multiline==c.multiline&&a.ignoreCase==c.ignoreCase}if("object"!=typeof a||"object"!=typeof c)return!1;for(var n=b.length;n--;)if(b[n]==a)return e[n]==
c;b.push(a);e.push(c);var n=0,d=!0;if(g(a,"array")){if(n=a.length,d=n==c.length)for(;n--&&(d=O(a[n],c[n],b,e)););}else{var f=a.constructor,k=c.constructor;if(f!==k&&(!z(f)||!(f instanceof f&&z(k)&&k instanceof k)))return!1;for(var l in a)if(s(a,l)&&(n++,!(d=s(c,l)&&O(a[l],c[l],b,e))))break;if(d){for(l in c)if(s(c,l)&&!n--)break;d=!n}}b.pop();e.pop();return d}function l(a,c,b){if(!a)throw new Exception("forEach: Array is null or undefined.",arguments);if(!g(c,"function"))throw new Exception("forEach: Iterator is not callable.",
arguments);var e=a.length>>>0,d=0;for(b=b||null;d<e;)s(a,d)&&c.call(b,a[d],d,a),d++}function aa(a,c){var b=[];l(a,function(a,d,f){b.push(c.call(null,a,d,f))});return b}function q(a,c,b){if(!k(b))throw new Exception("No initial value was provided.",arguments);var e=b;l(a,function(a,b,h){e=c.call(null,e,a,b,h)});return e}function P(a,c,b){if("function"!==typeof c)throw new Exception("Predicate is not callable.",arguments);var e=[];l(a,function(a,d,f){c.call(b,a,d,f)&&e.push(a)});return e}function f(a,
c,b){return Array.prototype.slice.call(a,c,b)}function m(){return Array.prototype.concat.apply([],f(arguments))}function F(a){return a[0]}function ba(a){return 0<a.length?a[a.length-1]:null}function w(a){return f(a,1)}function E(a,c){return Q(a,function(a){return N(c,a)})}function R(a){var c=[];l(a,function(a){E(c,a)||c.push(a)});return c}function J(){return q(f(arguments),function(a,c){var b=m(a,c);return R(b)},[])}function M(a,c){return q(a,function(a,b){c(b)||a.push(b);return a},[])}function Q(a,
c){if(!g(c,"function"))throw new Exception("any: predicate is not callable.");if(!g(a,"array","object"))throw new Exception("any: collection provided is not an enumerable object.");return q(a,function(a,b){return a?!0:c(b)},!1)}function ca(a,c){if(!g(c,"function"))throw new Exception("all: predicate is not callable.");if(!g(a,"array","object"))throw new Exception("all: collection provided is not an enumerable object.");return q(a,function(a,b){return a?c(b):!1},!0)}function S(a,c,b){if(0===a.length)return c;
if(0===c.length)return a;k(b)||(b=function(a,c){return m(a,c)});var e=b(head(a),head(c));a=S(w(a),w(c),b);return m(e,a)}function da(a){return q(a,function(a,b){return a+b},0)}function ea(a,c){if(c>a.length)return a;for(var b=[],e=0;e<c;e++)b.push(a[e]);return b}function fa(a,c){if(c>a.length)return[];for(var b=0;b<c;b++)a.shift();return a}function ga(){}function ha(a){return a}function A(a,c){return function(){return a.apply(c,f(arguments))}}function Z(a){var c=f(arguments,1);return function(){var b=
f(arguments);return a.apply(null,m(c,b))}}function B(){function a(a){p.console&&p.console.log&&p.console.log(a)}this.level=x.all;this.log=function(c){var b=f(arguments,1);c.gte(this.level)&&l(b,function(b){if("string"===typeof b)a(t("#{0}: #{1} - #{2}",new Date,c.name,b));else if(b instanceof Exception)a(b);else if(b instanceof Error){var h=t,d=new Date,f=c.name;var g=b.message||b.description||String(b);b?(g=t("Exception: #{0}",g),b.lineNumber&&(g=t("#{0} on line: #{1}",g,b.lineNumber)),b.fileName&&
(g=t("#{0} in file: #{1}",g,b.fileName)),b.stack&&(g=t("#{e}#{newline}Stack Trace:#{newline}#{stack}",{e:g,newline:newline,stack:b.stack})),b=g):b="N/A";a(h("#{0}: #{1} - #{2}",d,f,b))}else p.console&&p.console.dir?p.console.dir(b):null!==JSON&&JSON!==C&&a(JSON.stringify(b))})}}function r(a,b){this.level=a;this.name=b}function ia(a,b){this.context=b;this.message=a;return this}function T(){this.message="Iteration of the underlying collection has been completed.";return this}function G(a){var b=[],
h=this;l(a,function(a,d){var f=String(a),g=new U(f,d);h[f]=g;b.push(g)});this.values=function(){return b}}function U(a,b){this.name=a;this.value=b}b=b||{};b.version="2.1.0";var H={extendPrototypes:!1,createGlobalAliases:!1},I={extendPrototypes:!0,createGlobalAliases:!0};switch(v(d)){case "null":case "undefined":case "boolean":d=d?I:H;break;case "object":var I={},y;for(y in H)I[y]=null!==d[y]&&d[y]!==C?d[y]:H[y];d=I;break;default:d=H}b.configure=function(a){return V.call(null,p,b,a,V)};b.config=function(){return d};
b.string={};b.string.empty="";b.string.newline="\r\n";b.string.trim=function(a){return String.prototype.trim.call(a)};b.string.isEmpty=D;d.extendPrototypes&&(String.prototype.isEmpty=function(){return D.call(null,this)});b.string.repeat=W;d.extendPrototypes&&(String.prototype.repeat=function(a){return W.call(null,this,a)});b.string.str=X;b.string.format=t;b.object={};d.extendPrototypes&&(Object.prototype.getType=function(){return v.call(null,this)});b.object.getType=v;b.object.isType=g;d.extendPrototypes&&
(Object.prototype.isType=function(){var a=m(this,f(arguments));return g.apply(null,a)});b.object.exists=k;b.object.has=s;d.extendPrototypes&&(Object.prototype.has=Object.prototype.hasOwnProperty||function(a){return s.call(null,this,a)});b.object.mixin=Y;d.extendPrototypes&&(Object.prototype.mixin=function(a,b){return Y.call(null,this,a,b)});b.object.extend=$;d.extendPrototypes&&(Object.prototype.extend=function(){var a=m(this,f(arguments));return $.apply(null,a)});b.object.isFunction=z;b.object.functions=
K;d.extendPrototypes&&(Object.prototype.functions=function(){return K.call(null,this)});b.object.properties=L;d.extendPrototypes&&(Object.prototype.properties=function(){return L.call(null,this)});b.object.pick=u;d.extendPrototypes&&(Object.prototype.pick=function(a){return u.call(null,this,a)});b.object.areEqual=N;d.extendPrototypes&&(Object.prototype.areEqual=function(a){return N.call(null,this,a)});b.array={};b.array.forEach=l;d.extendPrototypes&&(Array.prototype.forEach=Array.prototype.forEach||
function(a,b){return l.call(null,this,a,b)});b.array.map=aa;d.extendPrototypes&&(Array.prototype.map=Array.prototype.map||function(a){return aa.call(null,this,a)});b.array.reduce=q;d.extendPrototypes&&(Array.prototype.reduce=Array.prototype.reduce||function(a,b){return q.call(null,this,a,b)});b.array.filter=P;d.extendPrototypes&&(Array.prototype.filter=Array.prototype.filter||function(a,b){return P.call(null,this,a,b)});b.array.slice=f;b.array.concat=m;b.array.append=function(a){return m(a,f(arguments,
1))};b.array.cons=function(a,b){return m(a,b)};b.array.first=F;b.array.head=F;d.extendPrototypes&&(Array.prototype.first=function(){return F.call(null,this)},Array.prototype.head=function(){return F.call(null,this)});b.array.last=ba;d.extendPrototypes&&(Array.prototype.last=function(){return ba.call(null,this)});b.array.tail=w;b.array.rest=w;d.extendPrototypes&&(Array.prototype.tail=function(){return w.call(null,this)},Array.prototype.rest=function(){return w.call(null,this)});b.array.contains=E;
d.extendPrototypes&&(Array.prototype.contains=function(a){return E.call(null,this,a)});b.array.find=function(a,b){for(var h=0;h<a.length;h++)if(b(a[h]))return a[h];return null};b.array.unique=R;d.extendPrototypes&&(Array.prototype.unique=function(){return R.call(null,this)});b.array.union=J;d.extendPrototypes&&(Array.prototype.union=function(){return J.call(null,this)});b.array.reject=M;d.extendPrototypes&&(Array.prototype.reject=function(a){return M.call(null,this,a)});b.array.any=Q;d.extendPrototypes&&
(Array.prototype.any=function(a){return Q.call(null,this,a)});b.array.all=ca;d.extendPrototypes&&(Array.prototype.all=function(a){return ca.call(null,this,a)});b.array.zip=S;d.extendPrototypes&&(Array.prototype.zip=function(a,b){return S.call(null,this,a,b)});b.array.sum=da;d.extendPrototypes&&(Array.prototype.sum=function(){return da.call(null,this)});b.array.take=ea;d.extendPrototypes&&(Array.prototype.take=function(a){return ea.call(null,this,a)});b.array.drop=fa;d.extendPrototypes&&(Array.prototype.drop=
function(a){return fa.call(null,this,a)});b.array.range=function(a,b){if(!k(a)&&!k(b))return[];k(b)||(b=a,a=0);for(var h=[],d=a;d<=b;d++)h.push(d);return h};b.Generator=function(a,b){if(!k(a)||!g(a,"function"))throw new Exception("Generator: generator function must be a function.");k(b)||(b=null);var d=b;this.next=function(){return d=a.call(null,d)};this.take=function(a){for(var b=[];b.length<a;)b.push(this.next());return b};this.drop=function(a){for(;0<a;)this.next()}};b.Enumerator=function(a){if(!k(a)||
!g(a,"array","object"))a=[];var b=Object.keys(a);this.next=function(){if(0!==b.length)return a[b.shift()];throw new T;};this.reset=function(){b=Object.keys(a)};this.count=function(){return Object.keys(a).length}};b.random={};b.random.chars=function(a){a=a||32;for(var b=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z",1,2,3,4,5,6,7,8,9],d=[],
e=0;e<a;e++)d.push(b[Math.floor(61*Math.random())]);return d.toString().replace(/[,]/g,"")};b.random.digits=function(a){a=a||32;for(var b="";b.length<a;)b+=Math.random().toString(10).slice(2);return b.slice(0,a)};b.random.hex=function(a){a=a||32;for(var b="";b.length<a;)b+=Math.random().toString(16).slice(2);return b.slice(0,a)};b.random.uuid=function(){return randomHex(8)+"-"+randomHex(4)+"-4"+randomHex(3)+"-"+randomHex(8)+randomHex(4)};b.func={};b.func.noop=ga;d.extendPrototypes&&(Function.prototype.noop=
ga);b.func.identity=ha;d.extendPrototypes&&(Function.prototype.identity=ha);b.func.bind=A;d.extendPrototypes&&(Function.prototype.bind=Function.prototype.bind||function(a){return A.call(null,this,a)});b.func.partial=Z;b.func.juxt=function(){var a=f(arguments);if(!a.length)throw Error("juxt requires at least one argument.");return function(){var b=f(arguments);return q(a,function(a,d){a.push(d.apply(null,b));return a},[])}};b.func.complement=function(a){return function(){return!a.apply(null,f(arguments))}};
b.func.thread=function(a){var b=f(arguments,1);return b.length?q(b,function(a,b){return b.apply(null,[a])},a):a};b.func.curry=function(a,b){if(a&&b)return function(){var d=f(arguments),d=b.apply(null,d);return a.apply(null,[d])};throw Error("Curry only accepts two functions.");};b.func.defmulti=function(a,b){if(!g(a,"function"))throw new Exception("defmulti: dispatcher must be a function");if(!g(b,"function"))throw new Exception("defmulti: $default must be a function");var d=[],e=f(arguments,2);l(e,
function(a){if(!g(a,"object")||!g(a.name,"string")||!g(a.fn,"function"))throw new Exception("defmulti: Function definition is not valid.",fn);d.push(a)});return function(){var e=f(arguments),k=a.apply(null,e);if(!g(k,"object")||!g(k.dispatch,"string"))throw new Exception("defmulti: expected a dispatch configuration object, but was invalid.",k);var m=P(d,function(a){return a.name===k.dispatch});0<m.length?l(m,function(a){a.fn.apply(null,e)}):b.apply(null,e)}};b.func.memoize=function(a){return function(){var b=
f(arguments),d="",e=b.length;for(currentArg=null;e--;)currentArg=b[e],d+=currentArg===Object(currentArg)?JSON.stringify(currentArg):currentArg,a.memoize=a.memoize||{};d in a.memoize||(a.memoize[d]=a.apply(this,b));return a.memoize[d]}};b.func.once=function(a){var b;return function(){k(b)||(b=a.apply(null,arguments));return b}};b.func.delay=function(a,b){var d=null,d=setTimeout(function(){a();clearTimeout(d);d=null},k(b)?b:100)};b.func.repeat=function(a,b){for(var d=b;0<d;)a(),d--};b.logging={};var x=
{all:new r(0,"all"),debug:new r(1,"debug"),info:new r(2,"info"),warn:new r(3,"warn"),error:new r(4,"error"),none:new r(5,"none")};b.logging.Levels=x;B.prototype.debug=function(){var a=m(x.debug,f(arguments));this.log.apply(this,a)};B.prototype.info=function(){var a=m(x.info,f(arguments));this.log.apply(this,a)};B.prototype.warn=function(){var a=m(x.warn,f(arguments));this.log.apply(this,a)};B.prototype.error=function(){var a=m(x.error,f(arguments));this.log.apply(this,a)};r.prototype.toString=function(){return this.name};
r.prototype.eq=function(a){return this.level===a.level};r.prototype.gte=function(a){return this.level>=a.level};b.logging.Level=r;b.log=new B;ia.prototype.toString=function(){return"ApplicationException: "+this.message};b.ApplicationException=ia;T.prototype.toString=function(){return"StopIterationException: "+this.message};b.StopIterationException=T;G.prototype.toString=function(){return X(", ",u(this.values(),"name"))};G.prototype.next=function(a){return this.values().length<a.value+1?this.values()[0]:
this.values()[a.value+1]};G.prototype.previous=function(a){return 0===a.value?this.values()[this.values.length-1]:this.values()[a.value-1]};b.Enumeration=G;U.prototype.toString=function(){return this.name};U.prototype.eq=function(a){return k(a)&&this.value===a.value&&this.name===a.name};d.createGlobalAliases&&l("string object array func random log ApplicationException StopIterationException Generator Enumerator Enumeration".split(" "),function(a){k(p[a])?b.log.warn("Unable to add toolbox."+a+" to global namespace. Name already exists."):
p[a]=b[a]});return b});

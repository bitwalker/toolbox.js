(function(m,b,q){"object"===typeof exports&&(exports=b(m,exports,!1,b));"function"===typeof define?define(b(m,{},!1,b)):m.$toolbox=b(m,{},!1,b)})(this,function(m,b,q,K,D){function L(a){var c=/[\S]+/g;return!g(a)||!c.test(a)}function y(a){return"undefined"===typeof a?"undefined":null===a?"null":a.constructor&&a.constructor.name?a.constructor.name.toLowerCase():Object.prototype.toString.call(a).toLowerCase()}function Y(a,c){if(!this)throw new h("each: Array is null or undefined.",arguments);if(!k(a,
"function"))throw new h("each: Iterator is not callable.",arguments);var e=Object(this),d=o.length>>>0,l=0;for(c=c||null;l<d;)u(o,l)&&a.call(c,o[l],l,e),l++}function h(a,c){this.context=c;this.message=a;return this}function M(){this.message="Iteration of the underlying collection has been completed.";return this}function G(a,c,e,d){if(a===c)return 0!==a||1/a==1/c;if(null===a||null===c)return a===c;if(!k(a,c))return!1;switch(y(a)){case "string":return a==String(c);case "number":return a!==+a?c!==+c:
0===a?1/a===1/c:a===+c;case "date":case "boolean":return+a==+c;case "regexp":return a.source==c.source&&a.global==c.global&&a.multiline==c.multiline&&a.ignoreCase==c.ignoreCase}if("object"!=typeof a||"object"!=typeof c)return!1;for(var l=e.length;l--;)if(e[l]==a)return d[l]==c;e.push(a);d.push(c);var l=0,b=!0;if(k(a,"array")){if(l=a.length,b=l==c.length)for(;l--&&(b=G(a[l],c[l],e,d)););}else{var f=a.constructor,h=c.constructor;if(f!==h&&(!z(f)||!(f instanceof f&&z(h)&&h instanceof h)))return!1;for(var g in a)if(u(a,
g)&&(l++,!(b=u(c,g)&&G(a[g],c[g],e,d))))break;if(b){for(g in c)if(u(c,g)&&!l--)break;b=!l}}e.pop();d.pop();return b}function k(a){var c=f(arguments,1);if(!c.length)throw Error("isType requires at least two arguments.");for(var e=0;e<c.length;e++){var d="string"===typeof c[e]?c[e]:y(c[e]);if(a===D&&("undefined"===d||d===D)||null===a&&("null"===d||null===d)||y(a)===d)return!0}return!1}function g(a){return!k(a,"null","undefined")}function u(a,c){if(!g(a))throw new h("$toolbox.has: Object does not exist.",
arguments);return g(c)?Object.prototype.hasOwnProperty.call(a,c)?!0:!1:n(Object.keys(a),function(c,d){Object.prototype.hasOwnProperty.call(a,d)&&c.push(d);return c},[])}function z(a,c){return k(a[c],"function")?!0:!1}function N(a){var c=[],e;for(e in a)if(u(a,e)&&z(a,e)){var d={name:e,fn:E(a[e],a),arguments:a[e].length};c.push(d)}return c}function O(a){var c=[],e;for(e in a)if(u(a,e)&&!z(a,e)){var d={name:e,get:function(c){return E(function(){return this[c]},a)}(e),set:function(c){return E(function(a){this[c]=
a},a)}(e)};c.push(d)}return c}function A(a,c){return n(a,function(a,d){d[c]&&a.push(d[c]);return a},[])}function P(a){var c=f(arguments);k(a,"string")?c=f(c,1):a=null;return c.length?n(c,function(c,d){var b="",b=k(d,"array")?n(d,function(a,c){return a+c.toString()},""):g(d.toString)?d.toString():Object.prototype.toString.call(d);return L(c)?b:g(a)?c+a+b:c+b},""):""}function v(a){function c(a,c){var b=a;p(c,function(a,c){if(k(a,type.object))for(var e in a){var d=RegExp("#\\{"+e+"\\}","g");b=b.replace(d,
a[e])}else d=RegExp("#\\{"+c+"\\}","g"),b=b.replace(d,a.toString())});return b}return function(a,d){if(k(a,type.regex)||k(a,type.string)){var b,f=/#\{[\d]+\}|#\{[\w-_]+\}/g,h=[];k(a,type.regex)?(b=/.+\/([gim]+)?$/.exec(a.toString()),b.shift(),b=/^\/(.+)\/[gim]+?$/.exec(a.toString()),b.shift(),b=b[0]):b=a;d.length&&(h=f.test(b)?b.match(f).length:0,h===d.length?b=c(b,d):h<d.length?b=c(b,d):h>d.length&&(f=d[d.length-1],b=c(b,d),b=b.replace(interpolationPattern,f.toString())));return b}throw Error("Invalid type passed as interpolation target. Must be string or RegExp.");
}(a,f(arguments,1))}function w(a){a=a||32;for(var c="";c.length<a;)c+=Math.random().toString(16).slice(2);return c.slice(0,a)}function f(a,c,e){return Array.prototype.slice.call(a,c,e)}function s(){return Array.prototype.concat.apply([],f(arguments))}function H(a,c){return f(a,0,c||1)}function I(a){return f(a,1)}function J(a,c){return Q(a,function(a){return c===a})}function R(a){var c=[];p(a,function(a){J(c,a)||c.push(a)});return c}function S(){return n(f(arguments),function(a,c){var e=s(a,c);return R(e)},
[])}function T(a,c){return n(c,function(c,d){a(d)||c.push(d);return c},[])}function Q(a,c){if(!k(c,"function"))throw new h("any: predicate is not callable.");if(!k(a,"array","object"))throw new h("any: collection provided is not an enumerable object.");return n(a,function(a,d){return a?!0:c(d)},!1)}function U(a,c,b){if(0===a.length)return c;if(0===c.length)return a;g(b)||(b=function(a,c){return s(a,c)});var d=b(H(a),H(c));a=U(I(a),I(c),b);return s(d,a)}function E(a,c){return function(){return a.apply(c,
f(arguments))}}function V(a){var c=f(arguments,1);return function(){var b=f(arguments);return a.apply(null,s(c,b))}}function B(){function a(a){m.console&&m.console.log&&W.log(a)}this.level=x.all;this.log=function(c){var b=f(arguments,1);c.gte(this.level)&&p(b,function(b){if("string"===typeof b)a(v("#{0}: #{1} - #{2}",new Date,c.name,b));else if(b instanceof h)a(b);else if(b instanceof Error){var e=v,f=new Date,k=c.name;var g=b.message||b.description||String(b);b?(g=v("Exception: #{0}",g),b.lineNumber&&
(g=v("#{0} on line: #{1}",g,b.lineNumber)),b.fileName&&(g=v("#{0} in file: #{1}",g,b.fileName)),b.stack&&(g=v("#{e}#{newline}Stack Trace:#{newline}#{stack}",{e:g,newline:string.newline,stack:b.stack})),b=g):b="N/A";a(e("#{0}: #{1} - #{2}",f,k,b))}else m.console&&m.console.dir?W.dir(b):null!==JSON&&JSON!==D&&a(JSON.stringify(b))})}}function t(a,c){this.level=a;this.name=c}b.version="1.1.2";var W=m.console||{};b.string={};b.string.empty="";b.string.newline="\r\n";b.string.trim=function(a){return String.prototype.trim.call(P)};
b.string.isEmpty=L;var p,n,X;b.getType=y;b.each=p=function(){var a=Array.prototype.forEach||Y;return function(c,b,d){return a.call(c,b,d)}}();b.map=function(){var a=Array.prototype.map||function(){Array.prototype.map=function(a){var b=[];p(this,function(a,c,f){b.push(iterator.call(null,a,c,f))});return b};return Array.prototype.map}();return function(c,b){return a.call(c,b)}}();b.reduce=n=function(){var a=Array.prototype.reduce||function(){Array.prototype.reduce=function(a,b){if(!b)throw new h("No initial value was provided.",
arguments);var d=b;p(this,function(b,e,f){d=a.call(null,d,b,e,f)});return d};return Array.prototype.reduce}();return function(c,b,d){return a.call(c,b,d)}}();b.filter=X=function(){var a=Array.prototype.filter||function(){Array.prototype.filter=function(a,b){if("function"!==typeof a)throw new h("Predicate is not callable.",arguments);var d=[];p(this,function(f,h,g){a.call(b,f,h,g)&&d.push(f)});return d};return Array.prototype.filter}();return function(c,b,d){return a.call(c,b,d)}}();var C={extendPrototypes:!1,
createGlobalAliases:!1},F=n(Object.keys(C),function(a,c){a[c]=!0;return a},{});switch(y(q)){case "null":case "undefined":case "boolean":q=q?F:C;break;case "object":var F={},r;for(r in C)F[r]=null!==q[r]&&q[r]!==D?q[r]:C[r];q=F;break;default:q=C}b.configure=function(a){return K.call(null,m,b,a,K)};b.config=function(){return q};b.Exception=h;h.prototype=Error.prototype;h.prototype.toString=function(){return"Exception: "+this.message};b.StopIterationException=M;M.prototype=h.prototype;b.areEqual=function(a,
c){return G(a,c,[],[])};b.isType=k;b.exists=g;b.has=u;b.mixin=function(a,c,b){this===a&&(b=S(["configure","config"],b));b=V(J,b||[]);var d=A(N(c),"name"),f=A(O(c),"name");b=T(b,s(d,f));p(b,function(b){a[b]=c[b]});return a};b.extend=function(a){if(this===a)throw new h("extend: Cannot extend toolbox. Use mixin instead.",this);var c=f(arguments,1);c.length&&p(c,function(c){var b=A(b(c),"name"),f=A(f(c),"name");p(s(b,f),function(b){a[b]=c[b]})});return a};b.isFunction=z;b.functions=N;b.properties=O;b.pick=
A;b.str=P;b.format=v;b.randomChars=function(a){a=a||32;for(var c=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z",1,2,3,4,5,6,7,8,9],b=[],d=0;d<a;d++)b.push(c[Math.floor(61*Math.random())]);return b.toString().replace(/[,]/g,"")};b.repeat=function(a,c){c=c||1;if(!k(a,"string"))throw new h("repeat: str must be a string.");if(!k(c,"number"))throw new h("repeat: n must be a number.");
for(var b=a,d=1;d<c;d++)b+=a;return b};b.randomDigits=function(a){a=a||32;for(var c="";c.length<a;)c+=Math.random().toString(10).slice(2);return c.slice(0,a)};b.randomHex=w;b.uuid=function(){return w(8)+"-"+w(4)+"-4"+w(3)+"-"+w(8)+w(4)};b.join=function(a,c){return Array.prototype.join.call(a,c)};b.slice=f;b.concat=s;b.push=function(a){return s(a,f(arguments,1))};b.cons=function(a,c){return s(a,c)};b.first=function(a){return a[0]};b.last=function(a){return a[a.length-1]};b.head=H;b.tail=I;b.contains=
J;b.unique=R;b.union=S;b.reject=T;b.any=Q;b.all=function(a,c){if(!k(c,"function"))throw new h("all: predicate is not callable.");if(!k(a,"array","object"))throw new h("all: collection provided is not an enumerable object.");return n(a,function(a,b){return a?c(b):!1},!0)};b.zip=U;b.sum=function(a){return n(a,function(a,b){return a+b},0)};b.take=function(a,c){if(c>a.length)return a;for(var b=[],d=0;d<c;d++)b.push(a[d]);return b};b.drop=function(a,c){if(c>a.length)return[];for(var b=0;b<c;b++)a.shift();
return a};b.range=function(a,b){if(!g(a)&&!g(b))return[];g(b)||(b=a,a=0);for(var e=[],d=a;d<=b;d++)e.push(d);return e};b.Generator=function(a,b){if(!g(a)||!k(a,"function"))throw new h("Generator: generator function must be a function.");g(b)||(b=null);var e=b;this.next=function(){return e=a.call(null,e)};this.take=function(a){for(var b=[];b.length<a;)b.push(this.next());return b};this.drop=function(a){for(;0<a;)this.next()}};b.noop=function(){};b.identity=function(a){return a};b.bind=E;b.papply=V;
b.juxt=function(){var a=f(arguments);if(!a.length)throw Error("juxt requires at least one argument.");return function(){var b=f(arguments);return n(a,function(a,d){a.push(d.apply(null,b));return a},[])}};b.complement=function(a){return function(){return!a.apply(null,f(arguments))}};b.thread=function(a){var b=f(arguments,1);return b.length?n(b,function(a,b){return b.apply(null,[a])},a):a};b.curry=function(a,b){if(a&&b)return function(){var e=f(arguments),e=b.apply(null,e);return a.apply(null,[e])};
throw Error("Curry only accepts two functions.");};b.defmulti=function(a,b){if(!k(a,"function"))throw new h("defmulti: dispatcher must be a function");if(!k(b,"function"))throw new h("defmulti: $default must be a function");var e=[],d=f(arguments,2);p(d,function(a){if(!k(a,"object")||!k(a.name,"string")||!k(a.fn,"function"))throw new h("defmulti: Function definition is not valid.",fn);e.push(a)});return function(){var d=f(arguments),g=a.apply(null,d);if(!k(g,"object")||!k(g.dispatch,"string"))throw new h("defmulti: expected a dispatch configuration object, but was invalid.",
g);var m=X(e,function(a){return a.name===g.dispatch});0<m.length?p(m,function(a){a.fn.apply(null,d)}):b.apply(null,d)}};b.memoize=function(a){return function(){var b=f(arguments),e="",d=b.length;for(currentArg=null;d--;)currentArg=b[d],e+=currentArg===Object(currentArg)?JSON.stringify(currentArg):currentArg,a.memoize=a.memoize||{};e in a.memoize||(a.memoize[e]=a.apply(this,b));return a.memoize[e]}};b.once=function(a){var b;return function(){g(b)||(b=a.apply(null,arguments));return b}};b.logging={};
var x={all:new t(0,"all"),debug:new t(1,"debug"),info:new t(2,"info"),warn:new t(3,"warn"),error:new t(4,"error"),none:new t(5,"none")};b.logging.Levels=x;B.prototype.debug=function(){var a=s(x.debug,f(arguments));this.log.apply(this,a)};B.prototype.info=function(){this.log.apply(this,x.info,f(arguments))};B.prototype.warn=function(){this.log.apply(this,x.warn,f(arguments))};B.prototype.error=function(){this.log.apply(this,x.error,f(arguments))};b.logging.Level=t;t.prototype.toString=function(){return this.name};
t.prototype.eq=function(a){return this.level===a.level};t.prototype.gte=function(a){return this.level>=a.level};b.log=new B;if(q.createGlobalAliases)for(r in b)g(m[r])?b.log.warn("Unable to create global alias for: "+r+". One is already defined. Skipping..."):m[r]=b[r];return b});

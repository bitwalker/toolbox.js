(function(l,b,p){"object"===typeof exports&&(exports=b(l,exports,!1,b));"function"===typeof define?define(b(l,{},!1,b)):l.toolbox=b(l,{},!1,b)})(this,function(l,b,p,K,D){function L(a){var c=/[\S]+/g;return!g(a)||!c.test(a)}function y(a){return"undefined"===typeof a?"undefined":null===a?"null":a.constructor&&a.constructor.name?a.constructor.name.toLowerCase():Object.prototype.toString.call(a).toLowerCase()}function Z(a,c){if(!this)throw new h("each: Array is null or undefined.",arguments);if(!k(a,
"function"))throw new h("each: Iterator is not callable.",arguments);var e=Object(this),d=o.length>>>0,b=0;for(c=c||null;b<d;)t(o,b)&&a.call(c,o[b],b,e),b++}function h(a,c){this.context=c;this.message=a;return this}function M(){this.message="Iteration of the underlying collection has been completed.";return this}function N(a,c){return G(a,c,[],[])}function G(a,c,e,d){if(a===c)return 0!==a||1/a==1/c;if(null===a||null===c)return a===c;if(!k(a,c))return!1;switch(y(a)){case "string":return a==String(c);
case "number":return a!==+a?c!==+c:0===a?1/a===1/c:a===+c;case "date":case "boolean":return+a==+c;case "regexp":return a.source==c.source&&a.global==c.global&&a.multiline==c.multiline&&a.ignoreCase==c.ignoreCase}if("object"!=typeof a||"object"!=typeof c)return!1;for(var b=e.length;b--;)if(e[b]==a)return d[b]==c;e.push(a);d.push(c);var b=0,v=!0;if(k(a,"array")){if(b=a.length,v=b==c.length)for(;b--&&(v=G(a[b],c[b],e,d)););}else{var f=a.constructor,h=c.constructor;if(f!==h&&(!z(f)||!(f instanceof f&&
z(h)&&h instanceof h)))return!1;for(var g in a)if(t(a,g)&&(b++,!(v=t(c,g)&&G(a[g],c[g],e,d))))break;if(v){for(g in c)if(t(c,g)&&!b--)break;v=!b}}e.pop();d.pop();return v}function k(a){var c=f(arguments,1);if(!c.length)throw Error("isType requires at least two arguments.");for(var e=0;e<c.length;e++){var d="string"===typeof c[e]?c[e]:y(c[e]);if(a===D&&("undefined"===d||d===D)||null===a&&("null"===d||null===d)||y(a)===d)return!0}return!1}function g(a){return!k(a,"null","undefined")}function t(a,c){if(!g(a))throw new h("$toolbox.has: Object does not exist.",
arguments);return g(c)?Object.prototype.hasOwnProperty.call(a,c)?!0:!1:m(Object.keys(a),function(c,d){Object.prototype.hasOwnProperty.call(a,d)&&c.push(d);return c},[])}function z(a,c){return k(a[c],"function")?!0:!1}function O(a){var c=[],e;for(e in a)if(t(a,e)&&z(a,e)){var d={name:e,fn:E(a[e],a),arguments:a[e].length};c.push(d)}return c}function P(a){var c=[],e;for(e in a)if(t(a,e)&&!z(a,e)){var d={name:e,get:function(c){return E(function(){return this[c]},a)}(e),set:function(c){return E(function(a){this[c]=
a},a)}(e)};c.push(d)}return c}function A(a,c){return m(a,function(a,d){d[c]&&a.push(d[c]);return a},[])}function Q(a){var c=f(arguments);k(a,"string")?c=f(c,1):a=null;return c.length?m(c,function(c,d){var b="",b=k(d,"array")?m(d,function(a,c){return a+c.toString()},""):g(d.toString)?d.toString():Object.prototype.toString.call(d);return L(c)?b:g(a)?c+a+b:c+b},""):""}function u(a){function c(a,c){var b=a;n(c,function(a,c){if(k(a,"object"))for(var e in a){var d=RegExp("#\\{"+e+"\\}","g");b=b.replace(d,
a[e])}else d=RegExp("#\\{"+c+"\\}","g"),b=b.replace(d,a.toString())});return b}return function(a,d){if(k(a,"regexp")||k(a,"string")){var b,f=/#\{[\d]+\}|#\{[\w-_]+\}/g,h=[];k(a,"regexp")?(b=/.+\/([gim]+)?$/.exec(a.toString()),b.shift(),b=/^\/(.+)\/[gim]+?$/.exec(a.toString()),b.shift(),b=b[0]):b=a;d.length&&(h=f.test(b)?b.match(f).length:0,h===d.length?b=c(b,d):h<d.length?b=c(b,d):h>d.length&&(f=d[d.length-1],b=c(b,d),b=b.replace(interpolationPattern,f.toString())));return b}throw Error("Invalid type passed as interpolation target. Must be string or RegExp.");
}(a,f(arguments,1))}function w(a){a=a||32;for(var c="";c.length<a;)c+=Math.random().toString(16).slice(2);return c.slice(0,a)}function f(a,c,b){return Array.prototype.slice.call(a,c,b)}function r(){return Array.prototype.concat.apply([],f(arguments))}function H(a,c){return f(a,0,c||1)}function I(a){return f(a,1)}function J(a,c){return R(a,function(a){return N(c,a)})}function S(a){var c=[];n(a,function(a){J(c,a)||c.push(a)});return c}function T(){return m(f(arguments),function(a,c){var b=r(a,c);return S(b)},
[])}function U(a,c){return m(c,function(c,b){a(b)||c.push(b);return c},[])}function R(a,c){if(!k(c,"function"))throw new h("any: predicate is not callable.");if(!k(a,"array","object"))throw new h("any: collection provided is not an enumerable object.");return m(a,function(a,b){return a?!0:c(b)},!1)}function V(a,c,b){if(0===a.length)return c;if(0===c.length)return a;g(b)||(b=function(a,c){return r(a,c)});var d=b(H(a),H(c));a=V(I(a),I(c),b);return r(d,a)}function E(a,c){return function(){return a.apply(c,
f(arguments))}}function W(a){var c=f(arguments,1);return function(){var b=f(arguments);return a.apply(null,r(c,b))}}function B(){function a(a){l.console&&l.console.log&&X.log(a)}this.level=x.all;this.log=function(c){var b=f(arguments,1);c.gte(this.level)&&n(b,function(b){if("string"===typeof b)a(u("#{0}: #{1} - #{2}",new Date,c.name,b));else if(b instanceof h)a(b);else if(b instanceof Error){var e=u,f=new Date,k=c.name;var g=b.message||b.description||String(b);b?(g=u("Exception: #{0}",g),b.lineNumber&&
(g=u("#{0} on line: #{1}",g,b.lineNumber)),b.fileName&&(g=u("#{0} in file: #{1}",g,b.fileName)),b.stack&&(g=u("#{e}#{newline}Stack Trace:#{newline}#{stack}",{e:g,newline:string.newline,stack:b.stack})),b=g):b="N/A";a(e("#{0}: #{1} - #{2}",f,k,b))}else l.console&&l.console.dir?X.dir(b):null!==JSON&&JSON!==D&&a(JSON.stringify(b))})}}function s(a,c){this.level=a;this.name=c}b.version="1.2.1";var X=l.console||{};b.string={};b.string.empty="";b.string.newline="\r\n";b.string.trim=function(a){return String.prototype.trim.call(Q)};
b.string.isEmpty=L;b.string.repeat=function(a,c){c=c||1;if(!k(a,"string"))throw new h("repeat: str must be a string.");if(!k(c,"number"))throw new h("repeat: n must be a number.");for(var b=a,d=1;d<c;d++)b+=a;return b};var n,m,Y;b.getType=y;b.each=n=function(){var a=Array.prototype.forEach||Z;return function(c,b,d){return a.call(c,b,d)}}();b.map=function(){var a=Array.prototype.map||function(){Array.prototype.map=function(a){var b=[];n(this,function(a,c,f){b.push(iterator.call(null,a,c,f))});return b};
return Array.prototype.map}();return function(c,b){return a.call(c,b)}}();b.reduce=m=function(){var a=Array.prototype.reduce||function(){Array.prototype.reduce=function(a,b){if(!b)throw new h("No initial value was provided.",arguments);var d=b;n(this,function(b,e,f){d=a.call(null,d,b,e,f)});return d};return Array.prototype.reduce}();return function(c,b,d){return a.call(c,b,d)}}();b.filter=Y=function(){var a=Array.prototype.filter||function(){Array.prototype.filter=function(a,b){if("function"!==typeof a)throw new h("Predicate is not callable.",
arguments);var d=[];n(this,function(f,g,h){a.call(b,f,g,h)&&d.push(f)});return d};return Array.prototype.filter}();return function(c,b,d){return a.call(c,b,d)}}();var C={extendPrototypes:!1,createGlobalAliases:!1},F=m(Object.keys(C),function(a,c){a[c]=!0;return a},{});switch(y(p)){case "null":case "undefined":case "boolean":p=p?F:C;break;case "object":var F={},q;for(q in C)F[q]=null!==p[q]&&p[q]!==D?p[q]:C[q];p=F;break;default:p=C}b.configure=function(a){return K.call(null,l,b,a,K)};b.config=function(){return p};
b.Exception=h;h.prototype=Error.prototype;h.prototype.toString=function(){return"Exception: "+this.message};b.StopIterationException=M;M.prototype=h.prototype;b.areEqual=N;b.isType=k;b.exists=g;b.has=t;b.mixin=function(a,c,b){this===a&&(b=T(["configure","config"],b));b=W(J,b||[]);var d=A(O(c),"name"),f=A(P(c),"name");b=U(b,r(d,f));n(b,function(b){a[b]=c[b]});return a};b.extend=function(a){if(this===a)throw new h("extend: Cannot extend toolbox. Use mixin instead.",this);var b=f(arguments,1);b.length&&
n(b,function(b){var c=A(c(b),"name"),f=A(f(b),"name");n(r(c,f),function(c){a[c]=b[c]})});return a};b.isFunction=z;b.functions=O;b.properties=P;b.pick=A;b.str=Q;b.format=u;b.randomChars=function(a){a=a||32;for(var b=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z",1,2,3,4,5,6,7,8,9],e=[],d=0;d<a;d++)e.push(b[Math.floor(61*Math.random())]);return e.toString().replace(/[,]/g,
"")};b.randomDigits=function(a){a=a||32;for(var b="";b.length<a;)b+=Math.random().toString(10).slice(2);return b.slice(0,a)};b.randomHex=w;b.uuid=function(){return w(8)+"-"+w(4)+"-4"+w(3)+"-"+w(8)+w(4)};b.join=function(a,b){return Array.prototype.join.call(a,b)};b.slice=f;b.concat=r;b.push=function(a){return r(a,f(arguments,1))};b.cons=function(a,b){return r(a,b)};b.first=function(a){return a[0]};b.last=function(a){return a[a.length-1]};b.head=H;b.tail=I;b.contains=J;b.unique=S;b.union=T;b.reject=
U;b.any=R;b.all=function(a,b){if(!k(b,"function"))throw new h("all: predicate is not callable.");if(!k(a,"array","object"))throw new h("all: collection provided is not an enumerable object.");return m(a,function(a,d){return a?b(d):!1},!0)};b.zip=V;b.sum=function(a){return m(a,function(a,b){return a+b},0)};b.take=function(a,b){if(b>a.length)return a;for(var e=[],d=0;d<b;d++)e.push(a[d]);return e};b.drop=function(a,b){if(b>a.length)return[];for(var e=0;e<b;e++)a.shift();return a};b.range=function(a,
b){if(!g(a)&&!g(b))return[];g(b)||(b=a,a=0);for(var e=[],d=a;d<=b;d++)e.push(d);return e};b.Generator=function(a,b){if(!g(a)||!k(a,"function"))throw new h("Generator: generator function must be a function.");g(b)||(b=null);var e=b;this.next=function(){return e=a.call(null,e)};this.take=function(a){for(var b=[];b.length<a;)b.push(this.next());return b};this.drop=function(a){for(;0<a;)this.next()}};b.noop=function(){};b.identity=function(a){return a};b.bind=E;b.papply=W;b.juxt=function(){var a=f(arguments);
if(!a.length)throw Error("juxt requires at least one argument.");return function(){var b=f(arguments);return m(a,function(a,d){a.push(d.apply(null,b));return a},[])}};b.complement=function(a){return function(){return!a.apply(null,f(arguments))}};b.thread=function(a){var b=f(arguments,1);return b.length?m(b,function(a,b){return b.apply(null,[a])},a):a};b.curry=function(a,b){if(a&&b)return function(){var e=f(arguments),e=b.apply(null,e);return a.apply(null,[e])};throw Error("Curry only accepts two functions.");
};b.defmulti=function(a,b){if(!k(a,"function"))throw new h("defmulti: dispatcher must be a function");if(!k(b,"function"))throw new h("defmulti: $default must be a function");var e=[],d=f(arguments,2);n(d,function(a){if(!k(a,"object")||!k(a.name,"string")||!k(a.fn,"function"))throw new h("defmulti: Function definition is not valid.",fn);e.push(a)});return function(){var d=f(arguments),g=a.apply(null,d);if(!k(g,"object")||!k(g.dispatch,"string"))throw new h("defmulti: expected a dispatch configuration object, but was invalid.",
g);var l=Y(e,function(a){return a.name===g.dispatch});0<l.length?n(l,function(a){a.fn.apply(null,d)}):b.apply(null,d)}};b.memoize=function(a){return function(){var b=f(arguments),e="",d=b.length;for(currentArg=null;d--;)currentArg=b[d],e+=currentArg===Object(currentArg)?JSON.stringify(currentArg):currentArg,a.memoize=a.memoize||{};e in a.memoize||(a.memoize[e]=a.apply(this,b));return a.memoize[e]}};b.once=function(a){var b;return function(){g(b)||(b=a.apply(null,arguments));return b}};b.delay=function(a,
b){var e=null,e=setTimeout(function(){a();clearTimeout(e);e=null},g(b)?b:100)};b.repeat=function(a,b){for(var e=b;0<e;)a(),e--};b.logging={};var x={all:new s(0,"all"),debug:new s(1,"debug"),info:new s(2,"info"),warn:new s(3,"warn"),error:new s(4,"error"),none:new s(5,"none")};b.logging.Levels=x;B.prototype.debug=function(){var a=r(x.debug,f(arguments));this.log.apply(this,a)};B.prototype.info=function(){this.log.apply(this,x.info,f(arguments))};B.prototype.warn=function(){this.log.apply(this,x.warn,
f(arguments))};B.prototype.error=function(){this.log.apply(this,x.error,f(arguments))};b.logging.Level=s;s.prototype.toString=function(){return this.name};s.prototype.eq=function(a){return this.level===a.level};s.prototype.gte=function(a){return this.level>=a.level};b.log=new B;if(p.createGlobalAliases)for(q in b)g(l[q])?b.log.warn("Unable to create global alias for: "+q+". One is already defined. Skipping..."):l[q]=b[q];return b});
